<div
  [formGroup]="this.data().form"
  class="bg-surface flex flex-col gap-3.5 rounded-lg p-4 shadow-sm">
  <div class="flex items-center justify-between gap-2">
    <p class="text-sm font-medium sm:text-base">
      Question #{{ this.data().index + 1 }}
    </p>
    <app-button
      variant="ghost"
      size="sm"
      customClasses="ml-auto"
      [disabled]="this.data().totalCount <= limits.MIN_QUESTIONS || isLoading()"
      (handleClick)="removeQuestion.emit()"
      >Remove</app-button
    >
  </div>
  <div class="flex flex-col gap-1.5">
    <p-floatlabel variant="on">
      <textarea
        id="title"
        type="text"
        pTextarea
        class="w-full"
        formControlName="text"
        placeholder="Enter the question here"
        cols="30"
        style="resize: none"></textarea>
      <label for="title">Question text</label>
    </p-floatlabel>
    <div class="flex flex-col gap-1">
      <div
        class="flex flex-col gap-2"
        formArrayName="answers">
        <p class="text-xs sm:text-sm">
          Options (you can select multiple answers)
        </p>
        @for (answer of answers().controls; track answer; let index = $index) {
          <div
            class="bg-background-app border-border-light flex items-center gap-3 rounded-lg border p-3 transition"
            [formGroupName]="index">
            <p-checkbox
              [binary]="true"
              formControlName="isCorrect" />
            <input
              id="title"
              type="text"
              pInputText
              class="w-full"
              formControlName="text"
              placeholder="Option {{ index + 1 }}" />
            @if (answers().length > limits.MIN_ANSWERS) {
              <app-button
                variant="primary"
                size="sm"
                customClasses="aspect-square"
                (handleClick)="removeAnswer.emit(index)"
                [disabled]="isLoading()"
                >-</app-button
              >
            }
          </div>
        }
        @if (answers().length < limits.MAX_ANSWERS) {
          <app-button
            variant="primary"
            size="sm"
            customClasses="mx-auto"
            (handleClick)="addAnswer.emit()"
            [disabled]="isLoading()"
            >Add option</app-button
          >
        }
      </div>
    </div>
  </div>
</div>
